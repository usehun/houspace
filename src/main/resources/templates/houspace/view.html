<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{/layout/basic :: setContent(~{this :: content})}">

    <th:block th:fragment="content">

        <!-- style image íŒŒì¼ ì—…ë¡œë“œ ìª½ ê´€ë ¨ ----------------------------------------------->
        <style>
            button {
                color: white;
            }

            .uploadResult {
                width: 100%;
                background-color: gray;
                margin-top: 10px;
            }

            .uploadResult ul {
                display: flex;
                flex-flow: row;
                justify-content: center;
                align-items: center;
                vertical-align: top;
                overflow: auto;
            }

            .uploadResult ul li {
                list-style: none;
                padding: 10px;
                margin-left: 2em;
            }

            .uploadResult ul li img {
                width: 300px;
            }
        </style>
        <!-- style image íŒŒì¼ ì—…ë¡œë“œ ìª½ ê´€ë ¨ ----------------------------------------------->

        <link rel="stylesheet" th:href="@{/project/css/reset.css}">
        <link rel="stylesheet" th:href="@{/project/css/view.css}">

        <div class="page">

            <form>
                <div>
                    <!-- ê°€ì ¸ ì˜¬ìˆ˜ ìˆëŠ” ì •ë³´ë“¤ -------------------------------------------->
                    <!--                    <h1>ë°©ì •ë³´ </h1> <br>-->
                    <!--                    <input type="text" name="bNum" th:value="${dto.bNum}"/>-->
                    <!--                    <input type="text" name="email" th:value="${gmail}"/>-->
                    <!--                    ê¸€ ë²ˆí˜¸ [[${dto.bNum}]] <br>-->
                    <!--                    title [[${dto.title}]] <br>-->
                    <!--                    content [[${dto.content}]] <br>-->
                    <!--                    ì´ìš© ê°€ëŠ¥ ë‚ ì§œ[[${dto.availableDate}]] <br>-->
                    <!--                    ì´ìš© ê°€ëŠ¥ ì‹œê°„[[${dto.availableTime}]] <br>-->
                    <!--                    ê°€ê²© [[${dto.price}]] <br>-->
                    <!--                    ì¸ì›ìˆ˜ [[${dto.people}]] <br>-->
                    <!--                    <input type="text" th:value="${dto.address}"/> <br>-->
                    <!--                    <a th:href="@{https://www.google.co.kr/maps/?${dto,address}hl=ko}">êµ¬ê¸€ì§€ë„ ë³´ê¸°</a> <br>-->
                    <!--                    <a th:href="@{https://map.naver.com/v5/search/${dto.address}/adress}">ë„¤ì´ë²„ì§€ë„ ë³´ê¸°</a> <br>-->
                    <!--                    ì „í™”ë²ˆí˜¸ [[${dto.phoneNumber}]] <br>-->
                    <!--                    ë“±ë¡ ë‚ ì§œ [[${dto.regDate}]]<br>-->
                    <!--                    ë“±ë¡ ì‹œê°„ [[${dto.modDate}]]<br>-->
                    <!--                    ë¦¬ë·° ìˆ˜ [[${dto.reviewCnt}]]<br>-->
                    <!--                    í‰ì  [[${dto.avg}]]<br>-->
                    <!--                    ì¹´í…Œê³ ë¦¬ ë²ˆí˜¸ [[${dto.cgNum}]]<br>-->
                    <!--                    ì¹´í…Œê³ ë¦¬ ì´ë¦„ [[${dto.cgName}]]<br>-->
                    <!--                    ìœ ì € ì´ë©”ì¼ [[${dto.email}]]<br>-->
                    <!--                    ìœ ì € ë‹‰ë„¤ì„ [[${dto.nickName}]]<br>-->
                    <!--                    ë¡œê·¸ì¸ ë°©ë²• [[${dto.fromSocial}]]<br>-->
                    <!--                    ìœ ì €ì˜ ê¶Œí•œ [[${dto.roleSet}]]<br>-->
                    <!-- ê°€ì ¸ ì˜¬ìˆ˜ ìˆëŠ” ì •ë³´ë“¤ -->
                </div>


                <div class="detail">
                    <div class="detailA">
                        <img class="imgview" th:if="${dto.imageDTOList.size() > 0 && dto.imageDTOList[0].path != null }"
                             th:src="|/display?fileName=${dto.imageDTOList[0].getThumbnailURL()}|">

                        <div class="detailA1">
                            <div class="detailA2">
                                <h1>[[${dto.title}]]</h1>
                                <a id="share" href="#"><i class="fas fa-share fa-2x"></i></a>
                                <a href="#"><i class="fas fa-heart fa-2x"></i></a>
                            </div>

                            <div class="line"></div>

                            <div class="detailA3">
                                <h4>[[${dto.address}]]</h4>

                                <!-- ì–´ë–¤ ì •ë³´ ë„£ì„ì§€ ìƒì˜ í›„ ê²°ì • (0704) ------------------------------------------------------>

                                <!--                            <p>ğŸ€90ë…„ëŒ€ ì¼ë³¸ ë¹ˆí‹°ì§€ ê°ì„± ëª¨ë¦¬ê±¸ ë¯¸ë¦¬ì˜ ë°©</p>-->
                                <!--                            <p>âœ¨ì—¬ë¦„ ì´ë²¤íŠ¸ ì§„í–‰ì¤‘ âœ¨</p>-->
                                <!--                            <p>90ë…„ëŒ€ ë„ì¿„ ì¼ë³¸ì˜ ëª¨ë¦¬ê±¸ â€˜ë¯¸ë¦¬â€™ì˜ ê°ì„±ê³¼ ì·¨í–¥, ìƒ‰ê°ì´ ì”ëœ© ë…¹ì•„ë“   ë¯¸ë¦¬ì˜ ë°©ì…ë‹ˆë‹¤.</p>-->

                                <!-- ì–´ë–¤ ì •ë³´ ë„£ì„ì§€ ìƒì˜ í›„ ê²°ì • (0704) --->

                                <div class="detailA4">

                                    <!--                                220705 ìˆ˜ì • | html ë³€ê²½ -->
                                    <div style="display: flex;">
                                        <p>ì˜ˆì•½ì‹œê°„</p>
                                        <p>[[${dto.availableTime}]] ê¹Œì§€</p>
                                    </div>

                                    <div style="display: flex;">
                                        <p>ìˆ˜ìš©ì¸ì›</p>
                                        <p>ìµœëŒ€ [[${dto.people}]] ëª…</p>
                                    </div>
                                    <!--                                220705 ìˆ˜ì • | html ë³€ê²½ -->
                                </div>
                            </div>
                            <div class="line"></div>

                            <div class="detailA5">
                                <div class="detailA6">
                                    <div class="profileTie">
                                        <img th:src="@{/project/img/user.png}" alt="">
                                        <p>[[${dto.nickName}]]</p>
                                    </div>
                                    <p>[[${dto.price}]] ì›</p>
                                </div>

                                <!--         ì˜ˆì•½ ë²„íŠ¼ ìˆ˜ì • 0704                   -->
                                <div class="detailA7">
                                    <button th:if="${bookDTO} == false" id="book_btn">ì˜ˆì•½í•˜ê¸°</button>
                                    <button th:if="${bookDTO} == true" disabled>ì˜ˆì•½ì™„ë£Œ</button>
                                    <a href="#">
                                        <button>ë¬¸ì˜í•˜ê¸°</button>
                                    </a>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!--                ê¸€ ë‚´ìš© ì¶”ê°€-->
                    <!-- ê³µê°„ì†Œê°œ + ì£¼ì˜ì‚¬í•­ : ë°±ì—”ë“œ '/write' ìˆ˜ì •í•˜ê¸° (0704) ------------------------->

                    <div class="contain">
                        <div class="write">
                            <div class="detailB1">
                                <h2>ê³µê°„ ì†Œê°œ</h2>
                            </div>

                            <div class="line"></div>

                            <div style="padding: 3px;">
                                <p> [[${dto.content}]] </p>
                            </div>
                        </div>

                        <section class="detailC">
                            <h2>ì£¼ì˜ì‚¬í•­</h2>

                            <div class="line"></div>

                            <div style="padding: 3px;">
                                <p> [[${dto.notice}]] </p>
                            </div>
                        </section>

                        <!-- ê³µê°„ì†Œê°œ + ì£¼ì˜ì‚¬í•­ : ë°±ì—”ë“œ '/write' ìˆ˜ì •í•˜ê¸° (0704) -->

                        <!--                        220705 ìˆ˜ì • | deailB1 íƒœê·¸ ë³€ê²½ -->
                        <!--                        CSSëŠ” ë”°ë¡œ ë³€ê²½ ì‚¬í•­ ì—†ìœ¼ì‹œë©´ ìƒì„¸í˜ì´ì§€ (ì´ìš©í›„ê¸°) ì „ë¶€ ê°€ì ¸ê°€ì‹œë©´ ë©ë‹ˆë‹¤ -->
                        <div class="detailB1">
                            <h2>ì´ìš©í›„ê¸°</h2>
                            <p>[[${dto.reviewCnt}]]ê°œ</p>
                            <h2>í‰ê· ë³„ì </h2>
                            <p>[[${dto.avg}]]</p>
                        </div>

                        <!--                        220705 ìˆ˜ì • | deailB1 íƒœê·¸ ë³€ê²½-->
                        <div class="line"></div>
                        <div>
                            <div class="detailB2">
                                <!--                                <div style="display: flex; align-items: center; justify-content: space-between;">-->
                                <!--                                    <div style="display: inline-flex; align-items:center">-->
                                <!--                                        <img th:src="@{/project/img/user.png}" alt="">-->
                                <!--                                        <h3>[[${dto.nickName}]]</h3>-->
                                <!--                                    </div>-->

                                <!--                                    <div>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                    </div>-->
                                <!--                                </div>-->

                                <!--                                <div style="padding-left: 60px;">-->
                                <!--                                    <p>ì•„ëŠ‘í•œ ê³µê°„ì— ì£¼ì¸ë¶„ë„ ì¹œì ˆí•˜ì…”ì„œ ì¢‹ì•˜ìŠµë‹ˆë‹¤. ë‹¤ìŒì— ë˜ ì˜¤ê³ ì‹¶ë„¤ìš”!</p>-->
                                <!--                                    <h4>2022.06.15 14:18:58</h4>-->
                                <!--                                </div>-->
                                <!--                                <div style="padding-left: 60px; margin: 15px 0;">-->
                                <!--                                    <h3 style="padding-bottom: 5px;">í˜¸ìŠ¤íŠ¸ì˜ ë‹µê¸€</h3>-->
                                <!--                                    <p>ë‹¤ìŒì— ë˜ ì˜¤ê³  ì‹¶ìœ¼ì‹œë‹¤ë‹ˆ ë„ˆë¬´ ê¸°ì˜ê³  ê°ë™ì´ë„¤ìš”ğŸ’ ë‹¤ìŒì—ë„ ë§Œì¡±í•˜ì‹¤ ìˆ˜ ìˆë„ë¡ ì¤€ë¹„ ì—´ì‹¬íˆ í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤ ^_^ ! ê°ì‚¬í•©ë‹ˆë‹¤ ê³ ê°ë‹˜ğŸ¥°</p>-->
                                <!--                                    <h4>2022.06.15 16:10:28</h4>-->
                                <!--                                </div>-->


                                <!--  ë¦¬ë·° ë¦¬ìŠ¤íŠ¸ ì¶œë ¥ ì¥ì†Œ      ------------------------------------------------------>
                                <div class="list-group reviewList">

                                </div>


                                <!-- ë¦¬ë·° ëª¨ë‹¬ì°½ ì¶”ê°€ (0705 ì˜¤ì±„ì˜) -------------------------------------------------->

                                <!-- bootstrap cdn ì¶”ê°€ ------------------------------------------------------------------------->
                                <link rel="stylesheet"
                                      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
                                <!--                                <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>-->

                                <script
                                        src="https://code.jquery.com/jquery-3.6.0.min.js"
                                        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
                                        crossorigin="anonymous"></script>

                                <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
                                <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
                                <!-- bootstrap cdn ì¶”ê°€ ------------------------------------------------------------------------->

                                <button type="button" class="btn btn-info addReviewBtn">ë¦¬ë·°ì“°ê¸°</button>

                                <div class="reviewModal modal" tabindex="-1" role="dialog">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h4 class="modal-title">ë¦¬ë·°ì“°ê¸°</h4>

                                                <button type="button" class="close" data-dismiss="modal" b
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>

                                            <div class="modal-body">
                                                <!-- ë¦¬ë·° ê²Œì‹œíŒì— ì“¸ì§€ë§ì§€ í™•ì¸ í›„ ìˆ˜ì • ì˜ˆì • (0704) ----------------------------------------->
                                                <input type="hidden" class="form-control" name="bNum"
                                                       th:value="${dto.bNum}" readonly/>
                                                <input type="hidden" class="form-control" name="email"
                                                       th:value="${gmail}" readonly/>

                                                <!-- ë¦¬ë·° ê²Œì‹œíŒì— ì“¸ì§€ë§ì§€ í™•ì¸ í›„ ìˆ˜ì • ì˜ˆì • (0704) -->

                                                <div class="form-group">
                                                    <label>ë‹‰ë„¤ì„</label>
                                                    <input type="text" th:value="${nickname}" class="form-control"
                                                           name="mid" readonly>
                                                </div>
                                                <div class="form-group">
                                                    <label>í‰ì  <span class="grade"></span> </label>
                                                    <div class="starrr"></div>
                                                </div>
                                                <div class="form-group">
                                                    <label>ë¦¬ë·°<label>
                                                        <input type="text" class="form-control" name="text"
                                                               placeholder="ë¦¬ë·° ì‘ì„±">
                                                </div>
                                            </div>

                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">
                                                    ë‹«ê¸°
                                                </button>
                                                <button type="button" class="btn btn-primary reviewSaveBtn">ì €ì¥í•˜ê¸°
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <script th:src="@{/project/starrr.js}"></script>
                                <link th:href="@{/css/starrr.css}" rel="stylesheet">
                                <link rel="stylesheet"
                                      href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">

                                <!-- ë¦¬ë·° ëª¨ë‹¬ì°½ ì¶”ê°€ (0705 ì˜¤ì±„ì˜) -->


                            </div>


                        </div>
                    </div>
                </div>
        </div>


        </form>
        <!-- ì§€ë„ ì¶œë ¥ ---------------------------------------------------------->

        <section class="detailE">
            <h2>[[${dto.title}]]</h2>

            <div class="line"></div>

            <p>[[${dto.address}]]</p>

            <div class="map">

                <!--                ì§€ë„ cssì¶”ê°€-->
                <div id="map"
                     style="width:100%;height:350px;position:relative;left:0px;right:0px;top:0px;bottom:0px;margin:auto;max-width:1130px;"></div>

                <script type="text/javascript"
                        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=19a90996ab171aeb8f65688a4bbe5be9&libraries=services"></script>
                <script th:inline="javascript">
                    $(document).ready(function (e) {


                        // ì§€ë„ ê´€ë ¨ script  ///////////////////////////////////////////////////
                        var mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div
                            mapOption = {
                                center: new kakao.maps.LatLng(33.450701, 126.570667), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
                                level: 3 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
                            };

                        // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
                        var map = new kakao.maps.Map(mapContainer, mapOption);

                        // ì£¼ì†Œ-ì¢Œí‘œ ë³€í™˜ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
                        var geocoder = new kakao.maps.services.Geocoder();

                        // ì£¼ì†Œë¡œ ì¢Œí‘œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤ th ë¬¸ë²•ìœ¼ë¡œ ì£¼ì†Œ ë§¤í•‘
                        geocoder.addressSearch([[${dto.address}]], function (result, status) {

                            // ì •ìƒì ìœ¼ë¡œ ê²€ìƒ‰ì´ ì™„ë£Œëìœ¼ë©´
                            if (status === kakao.maps.services.Status.OK) {

                                var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                                // ê²°ê³¼ê°’ìœ¼ë¡œ ë°›ì€ ìœ„ì¹˜ë¥¼ ë§ˆì»¤ë¡œ í‘œì‹œí•©ë‹ˆë‹¤
                                var marker = new kakao.maps.Marker({
                                    map: map,
                                    position: coords
                                });

                                // ì¸í¬ìœˆë„ìš°ë¡œ ì¥ì†Œì— ëŒ€í•œ ì„¤ëª…ì„ í‘œì‹œí•©ë‹ˆë‹¤
                                var infowindow = new kakao.maps.InfoWindow({
                                    content: '<div style="width:150px;text-align:center;padding:6px 0;">ê³µê°„</div>'
                                });
                                infowindow.open(map, marker);

                                // ì§€ë„ì˜ ì¤‘ì‹¬ì„ ê²°ê³¼ê°’ìœ¼ë¡œ ë°›ì€ ìœ„ì¹˜ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤
                                map.setCenter(coords);
                            }
                        });
                        // ì§€ë„ ê´€ë ¨ script  ///////////////////////////////////////////////////

                        // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ //////////////////////////////////////////////
                        $(".uploadResult li").click(function () {
                            var file = $(this).data('file');
                            console.log(file);
                            $('.imageModal .modal-body').html("<img style='width:200%' src='/display?fileName=" + file + "&size=1' >")
                            $(".imageModal").modal("show");
                        });
                        // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬

                        /* ì˜ˆì•½ ë²„íŠ¼ ëª¨ë‹¬ ****************************************/
                        //ë‚˜ì¤‘ì— êµ¬í˜„
                        /* ì˜ˆì•½ ë²„íŠ¼ ëª¨ë‹¬ */

                        var actionForm = $("form"); // form íƒœê·¸ ê°ì²´ ê°€ì ¸ì˜¤ê¸°


                        /* 2022.07.03. ìˆ˜ì • - í˜„ì¬ ë¡œê·¸ì¸í•œ ì •ë³´ ê°€ì ¸ì˜¤ê¸° **************************/
                        var isGmail = [[${gmail}]]  // nogmail
                        var isNickName = [[${nickname}]]    // nonickname
                        var actionForm = $("form"); // form íƒœê·¸ ê°ì²´ ê°€ì ¸ì˜¤ê¸°

                        /* ì˜ˆì•½ í•˜ê¸° ***************************************************/
                        $("#book_btn").on("click", function (e) {
                            e.preventDefault(); // ì „ì†¡ ë°©ì§€

                            let conf = confirm("ì˜ˆì•½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?");
                            if (conf) {
                                if (isGmail == "nogmail") {
                                    if (confirm("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤ ë¡œê·¸ì¸ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                                        location.href = "http://localhost:8181/houspace/mypage";
                                    } else {
                                        return;
                                    }
                                } else if (isGmail != "nogmail") {
                                    alert("ì˜ˆì•½ë˜ì—ˆìŠµë‹ˆë‹¤.")
                                    actionForm
                                        .attr("action", "/houspace/booking")
                                        .attr("method", "post")
                                        .submit();
                                }

                            } else if (!conf) {
                                return;
                            }
                        });
                        /* ì˜ˆì•½ í•˜ê¸° ***************************************************/


                        <!-- Review Modal  -------------------------------------------------------->

                        var grade = 0;
                        var bnum = [[${dto.bNum}]];


                        $('.starrr').starrr({
                            rating: grade,
                            change: function (e, value) {
                                if (value) {
                                    console.log(value);
                                    grade = value;
                                }
                            }
                        });


                        var reviewModal = $(".reviewModal");
                        var inputMid = $('input[name="mid"]');
                        var inputText = $('input[name="text"]');
                        var inputEmail = $('input[name="email"]');

                        $(".addReviewBtn").click(function () {

                            if (isGmail == "nogmail") {
                                if (confirm("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤ ë¡œê·¸ì¸ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                                    location.href = "http://localhost:8181/houspace/mypage";
                                } else {
                                    return;
                                }
                            } else {

                                inputText.val("");
                                reviewModal.modal('show');
                            }
                        });

                        $(".reviewSaveBtn").click(function () {
                            var data = {
                                bnum: bnum,
                                grade: grade,
                                text: inputText.val(),
                                nickName: inputMid.val(),
                                email: inputEmail.val()
                            };

                            console.log(data);

                            $.ajax({

                                url: '/reviews/' + bnum,
                                type: 'POST',
                                data: JSON.stringify(data),
                                contentType: "application/json; charset=utf-8",
                                dataType: "data",
                                success: function (result) {

                                    console.log("ê°’ : " + result);
                                }
                            })

                            reviewModal.modal('hide');
                            getBoardReviews();

                        });


                        <!-- ë¦¬ë·°ëª©ë¡ ----------------------------------------------------------------------------------->

                        //í˜ì´ì§€ê°€ ì—´ë¦¬ë©´ ë°”ë¡œ ë¦¬ë·° ë°ì´í„°ë“¤ì„ ê°€ì ¸ì™€ì„œ ì‚¬ìš©í•œë‹¤.
                        function getBoardReviews() {

                            function formatTime(str) {
                                var date = new Date(str);

                                return date.getFullYear() + '/' +
                                    (date.getMonth() + 1) + '/' +
                                    date.getDate() + ' ' +
                                    date.getHours() + ':' +
                                    date.getMinutes();
                            }

                            $.getJSON("/reviews/" + bnum + "/all", function (arr) {
                                var str = "";

                                $.each(arr, function (idx, review) {

                                    console.log(review);

                                    switch (review.grade) {
                                        case 1:
                                            review.grade = "â˜…";
                                            break;
                                        case 2:
                                            review.grade = "â˜…â˜…";
                                            break;
                                        case 3:
                                            review.grade = "â˜…â˜…â˜…";
                                            break;
                                        case 4:
                                            review.grade = "â˜…â˜…â˜…â˜…";
                                            break;
                                        case 5:
                                            review.grade = "â˜…â˜…â˜…â˜…â˜…";
                                            break;
                                        default:
                                            review.grade = "â˜†â˜†â˜†â˜†â˜†";
                                            break;
                                    }


                                    str += '    <div class="card-body" data-reviewnum=' + review.reviewnum + ' data-mid=' + review.mid + '>';
                                    str += '    <h5 class="card-title">' + review.text + ' <span>' + review.grade + '</span></h5>';
                                    str += '    <h6 class="card-subtitle mb-2 text-muted">' + review.nickName + '</h6>';
                                    str += '    <p class="card-text">' + formatTime(review.regDate) + '</p>';
                                    str += '    </div>';
                                });


                                // grade ìˆ«ìë¥¼ ì°¾ì•„ì„œ ë³„ë¡œ ë°”ê¾¸ëŠ” ì½”ë“œ

                                $(".reviewList").html(str);
                            });

                            $(".reviewgrade").each(function (idx, o) {

                                console.log(o);
                                $(this).starrr({rating: $(this).data("grade2"), readOnly: true});
                            });

                        }

                        getBoardReviews();


                        /* ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì•˜ê±°ë‚˜ ì˜ˆì•½í•˜ì§€ ì•Šì€ ê³³ì´ë¼ë©´ ë¦¬ë·°ë²„íŠ¼ ì•ˆë³´ì´ê²Œ */
                        let bookEmail = [[${bookEmail}]]

                        if (isGmail != "nogmail") {
                            if (isGmail != bookEmail) {
                                $(".addReviewBtn").hide();
                            }
                        } else if (isGmail == "nogmail") {
                            $(".addReviewBtn").hide();
                        }
                        /* ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì•˜ê±°ë‚˜ ì˜ˆì•½í•˜ì§€ ì•Šì€ ê³³ì´ë¼ë©´ ë¦¬ë·°ë²„íŠ¼ ì•ˆë³´ì´ê²Œ */

                        /* ê³µìœ  ë²„íŠ¼ ëˆ„ë¥´ë©´ ìš°ì„  url ë³µì‚¬í•˜ì—¬ alert ì°½ ë„ì›€ *****************/
                        $("#share").click(function (e) {
                            e.preventDefault();
                            var url = '';
                            var textarea = document.createElement("textarea");
                            document.body.appendChild(textarea);
                            url = window.document.location.href;
                            textarea.value = url;
                            textarea.select();
                            document.execCommand("copy");
                            document.body.removeChild(textarea);
                            alert("URLì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
                        });
                        /* ê³µìœ  ë²„íŠ¼ ëˆ„ë¥´ë©´ ìš°ì„  url ë³µì‚¬í•˜ì—¬ alert ì°½ ë„ì›€ *****************/


                    });

                </script>


                <em class="link">
                    <a href="javascript:void(0);"
                       onclick="window.open('http://fiy.daum.net/fiy/map/CsGeneral.daum', '_blank', 'width=981, height=650')">
                        <p style="font-size: 12px; color: #5b5b5b !important; text-decoration: none;">í˜¹ì‹œ ì£¼ì†Œ ê²°ê³¼ê°€ ì˜ëª» ë‚˜ì˜¤ëŠ”
                            ê²½ìš°ì—ëŠ” ì—¬ê¸°ì— ì œë³´í•´ì£¼ì„¸ìš”.</p>
                    </a>
                </em>


            </div>
        </section>

        </div>

    </th:block>

</th:block>