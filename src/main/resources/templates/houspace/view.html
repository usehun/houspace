<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{/layout/basic :: setContent(~{this :: content})}">

    <th:block th:fragment="content">

        <!-- style image ÌååÏùº ÏóÖÎ°úÎìú Ï™Ω Í¥ÄÎ†® ----------------------------------------------->
        <style>
            button {
                color: white;
            }

            .uploadResult {
                width: 100%;
                background-color: gray;
                margin-top: 10px;
            }

            .uploadResult ul {
                display: flex;
                flex-flow: row;
                justify-content: center;
                align-items: center;
                vertical-align: top;
                overflow: auto;
            }

            .uploadResult ul li {
                list-style: none;
                padding: 10px;
                margin-left: 2em;
            }

            .uploadResult ul li img {
                width: 300px;
            }
        </style>
        <!-- style image ÌååÏùº ÏóÖÎ°úÎìú Ï™Ω Í¥ÄÎ†® ----------------------------------------------->

        <link rel="stylesheet" th:href="@{/project/css/reset.css}">
        <link rel="stylesheet" th:href="@{/project/css/view.css}">

        <div class="page">

            <form>
                <div>
                    <!-- Í∞ÄÏ†∏ Ïò¨Ïàò ÏûàÎäî Ï†ïÎ≥¥Îì§ -------------------------------------------->
                    <!--                    <h1>Î∞©Ï†ïÎ≥¥ </h1> <br>-->
                    <!--                    <input type="text" name="bNum" th:value="${dto.bNum}"/>-->
                    <!--                    <input type="text" name="email" th:value="${gmail}"/>-->
                    <!--                    Í∏Ä Î≤àÌò∏ [[${dto.bNum}]] <br>-->
                    <!--                    title [[${dto.title}]] <br>-->
                    <!--                    content [[${dto.content}]] <br>-->
                    <!--                    Ïù¥Ïö© Í∞ÄÎä• ÎÇ†Ïßú[[${dto.availableDate}]] <br>-->
                    <!--                    Ïù¥Ïö© Í∞ÄÎä• ÏãúÍ∞Ñ[[${dto.availableTime}]] <br>-->
                    <!--                    Í∞ÄÍ≤© [[${dto.price}]] <br>-->
                    <!--                    Ïù∏ÏõêÏàò [[${dto.people}]] <br>-->
                    <!--                    <input type="text" th:value="${dto.address}"/> <br>-->
                    <!--                    <a th:href="@{https://www.google.co.kr/maps/?${dto,address}hl=ko}">Íµ¨Í∏ÄÏßÄÎèÑ Î≥¥Í∏∞</a> <br>-->
                    <!--                    <a th:href="@{https://map.naver.com/v5/search/${dto.address}/adress}">ÎÑ§Ïù¥Î≤ÑÏßÄÎèÑ Î≥¥Í∏∞</a> <br>-->
                    <!--                    Ï†ÑÌôîÎ≤àÌò∏ [[${dto.phoneNumber}]] <br>-->
                    <!--                    Îì±Î°ù ÎÇ†Ïßú [[${dto.regDate}]]<br>-->
                    <!--                    Îì±Î°ù ÏãúÍ∞Ñ [[${dto.modDate}]]<br>-->
                    <!--                    Î¶¨Î∑∞ Ïàò [[${dto.reviewCnt}]]<br>-->
                    <!--                    ÌèâÏ†ê [[${dto.avg}]]<br>-->
                    <!--                    Ïπ¥ÌÖåÍ≥†Î¶¨ Î≤àÌò∏ [[${dto.cgNum}]]<br>-->
                    <!--                    Ïπ¥ÌÖåÍ≥†Î¶¨ Ïù¥Î¶Ñ [[${dto.cgName}]]<br>-->
                    <!--                    Ïú†Ï†Ä Ïù¥Î©îÏùº [[${dto.email}]]<br>-->
                    <!--                    Ïú†Ï†Ä ÎãâÎÑ§ÏûÑ [[${dto.nickName}]]<br>-->
                    <!--                    Î°úÍ∑∏Ïù∏ Î∞©Î≤ï [[${dto.fromSocial}]]<br>-->
                    <!--                    Ïú†Ï†ÄÏùò Í∂åÌïú [[${dto.roleSet}]]<br>-->
                    <!-- Í∞ÄÏ†∏ Ïò¨Ïàò ÏûàÎäî Ï†ïÎ≥¥Îì§ -->
                </div>


                <div class="detail">
                    <div class="detailA">
                        <img class="imgview" th:if="${dto.imageDTOList.size() > 0 && dto.imageDTOList[0].path != null }"
                             th:src="|/display?fileName=${dto.imageDTOList[0].getThumbnailURL()}|">

                        <div class="detailA1">
                            <div class="detailA2">
                                <h1>[[${dto.title}]]</h1>
                                <a id="share" href="#"><i class="fas fa-share fa-2x"></i></a>
                                <a href="#"><i class="fas fa-heart fa-2x"></i></a>
                            </div>

                            <div class="line"></div>

                            <div class="detailA3">
                                <h4>[[${dto.address}]]</h4>

                                <!-- Ïñ¥Îñ§ Ï†ïÎ≥¥ ÎÑ£ÏùÑÏßÄ ÏÉÅÏùò ÌõÑ Í≤∞Ï†ï (0704) ------------------------------------------------------>

                                <!--                            <p>üçÄ90ÎÖÑÎåÄ ÏùºÎ≥∏ ÎπàÌã∞ÏßÄ Í∞êÏÑ± Î™®Î¶¨Í±∏ ÎØ∏Î¶¨Ïùò Î∞©</p>-->
                                <!--                            <p>‚ú®Ïó¨Î¶Ñ Ïù¥Î≤§Ìä∏ ÏßÑÌñâÏ§ë ‚ú®</p>-->
                                <!--                            <p>90ÎÖÑÎåÄ ÎèÑÏøÑ ÏùºÎ≥∏Ïùò Î™®Î¶¨Í±∏ ‚ÄòÎØ∏Î¶¨‚ÄôÏùò Í∞êÏÑ±Í≥º Ï∑®Ìñ•, ÏÉâÍ∞êÏù¥ ÏûîÎú© ÎÖπÏïÑÎì†  ÎØ∏Î¶¨Ïùò Î∞©ÏûÖÎãàÎã§.</p>-->

                                <!-- Ïñ¥Îñ§ Ï†ïÎ≥¥ ÎÑ£ÏùÑÏßÄ ÏÉÅÏùò ÌõÑ Í≤∞Ï†ï (0704) --->

                                <div class="detailA4">

                                    <!--                                220705 ÏàòÏ†ï | html Î≥ÄÍ≤Ω -->
                                    <div style="display: flex;">
                                        <p>ÏòàÏïΩÏãúÍ∞Ñ</p>
                                        <p>[[${dto.availableTime}]] ÍπåÏßÄ</p>
                                    </div>

                                    <div style="display: flex;">
                                        <p>ÏàòÏö©Ïù∏Ïõê</p>
                                        <p>ÏµúÎåÄ [[${dto.people}]] Î™Ö</p>
                                    </div>
                                    <!--                                220705 ÏàòÏ†ï | html Î≥ÄÍ≤Ω -->
                                </div>
                            </div>
                            <div class="line"></div>

                            <div class="detailA5">
                                <div class="detailA6">
                                    <div class="profileTie">
                                        <img th:src="@{/project/img/user.png}" alt="">
                                        <p>[[${dto.nickName}]]</p>
                                    </div>
                                    <p>[[${dto.price}]] Ïõê</p>
                                </div>

                                <!--         ÏòàÏïΩ Î≤ÑÌäº ÏàòÏ†ï 0704                   -->
                                <div class="detailA7">
                                    <button th:if="${bookDTO} == false" id="book_btn">ÏòàÏïΩÌïòÍ∏∞</button>
                                    <button th:if="${bookDTO} == true" disabled>ÏòàÏïΩÏôÑÎ£å</button>
                                    <a href="#">
                                        <button>Î¨∏ÏùòÌïòÍ∏∞</button>
                                    </a>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!--                Í∏Ä ÎÇ¥Ïö© Ï∂îÍ∞Ä-->
                    <!-- Í≥µÍ∞ÑÏÜåÍ∞ú + Ï£ºÏùòÏÇ¨Ìï≠ : Î∞±ÏóîÎìú '/write' ÏàòÏ†ïÌïòÍ∏∞ (0704) ------------------------->

                    <div class="contain">
                        <div class="write">
                            <div class="detailB1">
                                <h2>Í≥µÍ∞Ñ ÏÜåÍ∞ú</h2>
                            </div>

                            <div class="line"></div>

                            <div style="padding: 3px;">
                                <p> [[${dto.content}]] </p>
                            </div>
                        </div>

                        <section class="detailC">
                            <h2>Ï£ºÏùòÏÇ¨Ìï≠</h2>

                            <div class="line"></div>

                            <div style="padding: 3px;">
                                <p> [[${dto.notice}]] </p>
                            </div>
                        </section>

                        <!-- Í≥µÍ∞ÑÏÜåÍ∞ú + Ï£ºÏùòÏÇ¨Ìï≠ : Î∞±ÏóîÎìú '/write' ÏàòÏ†ïÌïòÍ∏∞ (0704) -->

                        <!--                        220705 ÏàòÏ†ï | deailB1 ÌÉúÍ∑∏ Î≥ÄÍ≤Ω -->
                        <!--                        CSSÎäî Îî∞Î°ú Î≥ÄÍ≤Ω ÏÇ¨Ìï≠ ÏóÜÏúºÏãúÎ©¥ ÏÉÅÏÑ∏ÌéòÏù¥ÏßÄ (Ïù¥Ïö©ÌõÑÍ∏∞) Ï†ÑÎ∂Ä Í∞ÄÏ†∏Í∞ÄÏãúÎ©¥ Îê©ÎãàÎã§ -->
                        <div class="detailB1">
                            <h2>Ïù¥Ïö©ÌõÑÍ∏∞</h2>
                            <p>[[${dto.reviewCnt}]]Í∞ú</p>
                            <h2>ÌèâÍ∑†Î≥ÑÏ†ê</h2>
                            <p>[[${dto.avg}]]</p>
                        </div>

                        <!--                        220705 ÏàòÏ†ï | deailB1 ÌÉúÍ∑∏ Î≥ÄÍ≤Ω-->
                        <div class="line"></div>
                        <div>
                            <div class="detailB2">
                                <!--                                <div style="display: flex; align-items: center; justify-content: space-between;">-->
                                <!--                                    <div style="display: inline-flex; align-items:center">-->
                                <!--                                        <img th:src="@{/project/img/user.png}" alt="">-->
                                <!--                                        <h3>[[${dto.nickName}]]</h3>-->
                                <!--                                    </div>-->

                                <!--                                    <div>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                        <i class="fas fa-star"></i>-->
                                <!--                                    </div>-->
                                <!--                                </div>-->

                                <!--                                <div style="padding-left: 60px;">-->
                                <!--                                    <p>ÏïÑÎäëÌïú Í≥µÍ∞ÑÏóê Ï£ºÏù∏Î∂ÑÎèÑ ÏπúÏ†àÌïòÏÖîÏÑú Ï¢ãÏïòÏäµÎãàÎã§. Îã§ÏùåÏóê Îòê Ïò§Í≥†Ïã∂ÎÑ§Ïöî!</p>-->
                                <!--                                    <h4>2022.06.15 14:18:58</h4>-->
                                <!--                                </div>-->
                                <!--                                <div style="padding-left: 60px; margin: 15px 0;">-->
                                <!--                                    <h3 style="padding-bottom: 5px;">Ìò∏Ïä§Ìä∏Ïùò ÎãµÍ∏Ä</h3>-->
                                <!--                                    <p>Îã§ÏùåÏóê Îòê Ïò§Í≥† Ïã∂ÏúºÏãúÎã§Îãà ÎÑàÎ¨¥ Í∏∞ÏÅòÍ≥† Í∞êÎèôÏù¥ÎÑ§Ïöîüíû Îã§ÏùåÏóêÎèÑ ÎßåÏ°±ÌïòÏã§ Ïàò ÏûàÎèÑÎ°ù Ï§ÄÎπÑ Ïó¥Ïã¨Ìûà ÌïòÎèÑÎ°ù ÌïòÍ≤†ÏäµÎãàÎã§ ^_^ ! Í∞êÏÇ¨Ìï©ÎãàÎã§ Í≥†Í∞ùÎãòü•∞</p>-->
                                <!--                                    <h4>2022.06.15 16:10:28</h4>-->
                                <!--                                </div>-->


                                <!--  Î¶¨Î∑∞ Î¶¨Ïä§Ìä∏ Ï∂úÎ†• Ïû•ÏÜå      ------------------------------------------------------>
                                <div class="list-group reviewList">

                                </div>


                                <!-- Î¶¨Î∑∞ Î™®Îã¨Ï∞Ω Ï∂îÍ∞Ä (0705 Ïò§Ï±ÑÏòÅ) -------------------------------------------------->

                                <!-- bootstrap cdn Ï∂îÍ∞Ä ------------------------------------------------------------------------->
                                <link rel="stylesheet"
                                      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
                                <!--                                <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>-->

                                <script
                                        src="https://code.jquery.com/jquery-3.6.0.min.js"
                                        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
                                        crossorigin="anonymous"></script>

                                <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
                                <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
                                <!-- bootstrap cdn Ï∂îÍ∞Ä ------------------------------------------------------------------------->

                                <button type="button" class="btn btn-info addReviewBtn">Î¶¨Î∑∞Ïì∞Í∏∞</button>

                                <div class="reviewModal modal" tabindex="-1" role="dialog">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h4 class="modal-title">Î¶¨Î∑∞Ïì∞Í∏∞</h4>

                                                <button type="button" class="close" data-dismiss="modal" b
                                                        aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>

                                            <div class="modal-body">
                                                <!-- Î¶¨Î∑∞ Í≤åÏãúÌåêÏóê Ïì∏ÏßÄÎßêÏßÄ ÌôïÏù∏ ÌõÑ ÏàòÏ†ï ÏòàÏ†ï (0704) ----------------------------------------->
                                                <input type="hidden" class="form-control" name="bNum"
                                                       th:value="${dto.bNum}" readonly/>
                                                <input type="hidden" class="form-control" name="email"
                                                       th:value="${gmail}" readonly/>

                                                <!-- Î¶¨Î∑∞ Í≤åÏãúÌåêÏóê Ïì∏ÏßÄÎßêÏßÄ ÌôïÏù∏ ÌõÑ ÏàòÏ†ï ÏòàÏ†ï (0704) -->

                                                <div class="form-group">
                                                    <label>ÎãâÎÑ§ÏûÑ</label>
                                                    <input type="text" th:value="${nickname}" class="form-control"
                                                           name="mid" readonly>
                                                </div>
                                                <div class="form-group">
                                                    <label>ÌèâÏ†ê <span class="grade"></span> </label>
                                                    <div class="starrr"></div>
                                                </div>
                                                <div class="form-group">
                                                    <label>Î¶¨Î∑∞<label>
                                                        <input type="text" class="form-control" name="text"
                                                               placeholder="Î¶¨Î∑∞ ÏûëÏÑ±">
                                                </div>
                                            </div>

                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">
                                                    Îã´Í∏∞
                                                </button>
                                                <button type="button" class="btn btn-primary reviewSaveBtn">Ï†ÄÏû•ÌïòÍ∏∞
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <script th:src="@{/project/starrr.js}"></script>
                                <link th:href="@{/css/starrr.css}" rel="stylesheet">
                                <link rel="stylesheet"
                                      href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">

                                <!-- Î¶¨Î∑∞ Î™®Îã¨Ï∞Ω Ï∂îÍ∞Ä (0705 Ïò§Ï±ÑÏòÅ) -->


                            </div>


                        </div>
                    </div>
                </div>
        </div>


        </form>
        <!-- ÏßÄÎèÑ Ï∂úÎ†• ---------------------------------------------------------->

        <section class="detailE">
            <h2>[[${dto.title}]]</h2>

            <div class="line"></div>

            <p>[[${dto.address}]]</p>

            <div class="map">

                <!--                ÏßÄÎèÑ cssÏ∂îÍ∞Ä-->
                <div id="map"
                     style="width:100%;height:350px;position:relative;left:0px;right:0px;top:0px;bottom:0px;margin:auto;max-width:1130px;"></div>

                <script type="text/javascript"
                        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=19a90996ab171aeb8f65688a4bbe5be9&libraries=services"></script>
                <script th:inline="javascript">
                    $(document).ready(function (e) {


                        // ÏßÄÎèÑ Í¥ÄÎ†® script  ///////////////////////////////////////////////////
                        var mapContainer = document.getElementById('map'), // ÏßÄÎèÑÎ•º ÌëúÏãúÌï† div
                            mapOption = {
                                center: new kakao.maps.LatLng(33.450701, 126.570667), // ÏßÄÎèÑÏùò Ï§ëÏã¨Ï¢åÌëú
                                level: 3 // ÏßÄÎèÑÏùò ÌôïÎåÄ Î†àÎ≤®
                            };

                        // ÏßÄÎèÑÎ•º ÏÉùÏÑ±Ìï©ÎãàÎã§
                        var map = new kakao.maps.Map(mapContainer, mapOption);

                        // Ï£ºÏÜå-Ï¢åÌëú Î≥ÄÌôò Í∞ùÏ≤¥Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§
                        var geocoder = new kakao.maps.services.Geocoder();

                        // Ï£ºÏÜåÎ°ú Ï¢åÌëúÎ•º Í≤ÄÏÉâÌï©ÎãàÎã§ th Î¨∏Î≤ïÏúºÎ°ú Ï£ºÏÜå Îß§Ìïë
                        geocoder.addressSearch([[${dto.address}]], function (result, status) {

                            // Ï†ïÏÉÅÏ†ÅÏúºÎ°ú Í≤ÄÏÉâÏù¥ ÏôÑÎ£åÎêêÏúºÎ©¥
                            if (status === kakao.maps.services.Status.OK) {

                                var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                                // Í≤∞Í≥ºÍ∞íÏúºÎ°ú Î∞õÏùÄ ÏúÑÏπòÎ•º ÎßàÏª§Î°ú ÌëúÏãúÌï©ÎãàÎã§
                                var marker = new kakao.maps.Marker({
                                    map: map,
                                    position: coords
                                });

                                // Ïù∏Ìè¨ÏúàÎèÑÏö∞Î°ú Ïû•ÏÜåÏóê ÎåÄÌïú ÏÑ§Î™ÖÏùÑ ÌëúÏãúÌï©ÎãàÎã§
                                var infowindow = new kakao.maps.InfoWindow({
                                    content: '<div style="width:150px;text-align:center;padding:6px 0;">Í≥µÍ∞Ñ</div>'
                                });
                                infowindow.open(map, marker);

                                // ÏßÄÎèÑÏùò Ï§ëÏã¨ÏùÑ Í≤∞Í≥ºÍ∞íÏúºÎ°ú Î∞õÏùÄ ÏúÑÏπòÎ°ú Ïù¥ÎèôÏãúÌÇµÎãàÎã§
                                map.setCenter(coords);
                            }
                        });
                        // ÏßÄÎèÑ Í¥ÄÎ†® script  ///////////////////////////////////////////////////

                        // Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨Î≥¥Í∏∞ Î™®Îã¨ //////////////////////////////////////////////
                        $(".uploadResult li").click(function () {
                            var file = $(this).data('file');
                            console.log(file);
                            $('.imageModal .modal-body').html("<img style='width:200%' src='/display?fileName=" + file + "&size=1' >")
                            $(".imageModal").modal("show");
                        });
                        // Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨Î≥¥Í∏∞ Î™®Îã¨

                        /* ÏòàÏïΩ Î≤ÑÌäº Î™®Îã¨ ****************************************/
                        //ÎÇòÏ§ëÏóê Íµ¨ÌòÑ
                        /* ÏòàÏïΩ Î≤ÑÌäº Î™®Îã¨ */

                        var actionForm = $("form"); // form ÌÉúÍ∑∏ Í∞ùÏ≤¥ Í∞ÄÏ†∏Ïò§Í∏∞


                        /* 2022.07.03. ÏàòÏ†ï - ÌòÑÏû¨ Î°úÍ∑∏Ïù∏Ìïú Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ **************************/
                        var isGmail = [[${gmail}]]  // nogmail
                        var isNickName = [[${nickname}]]    // nonickname
                        var actionForm = $("form"); // form ÌÉúÍ∑∏ Í∞ùÏ≤¥ Í∞ÄÏ†∏Ïò§Í∏∞

                        /* ÏòàÏïΩ ÌïòÍ∏∞ ***************************************************/
                        $("#book_btn").on("click", function (e) {
                            e.preventDefault(); // Ï†ÑÏÜ° Î∞©ÏßÄ

                            let conf = confirm("ÏòàÏïΩÌïòÏãúÍ≤†ÏäµÎãàÍπå?");
                            if (conf) {
                                if (isGmail == "nogmail") {
                                    if (confirm("Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§ Î°úÍ∑∏Ïù∏ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) {
                                        location.href = "http://localhost:8181/houspace/mypage";
                                    } else {
                                        return;
                                    }
                                } else if (isGmail != "nogmail") {
                                    alert("ÏòàÏïΩÎêòÏóàÏäµÎãàÎã§.")
                                    actionForm
                                        .attr("action", "/houspace/booking")
                                        .attr("method", "post")
                                        .submit();
                                }

                            } else if (!conf) {
                                return;
                            }
                        });
                        /* ÏòàÏïΩ ÌïòÍ∏∞ ***************************************************/


                        <!-- Review Modal  -------------------------------------------------------->

                        var grade = 0;
                        var bnum = [[${dto.bNum}]];


                        $('.starrr').starrr({
                            rating: grade,
                            change: function (e, value) {
                                if (value) {
                                    console.log(value);
                                    grade = value;
                                }
                            }
                        });


                        var reviewModal = $(".reviewModal");
                        var inputMid = $('input[name="mid"]');
                        var inputText = $('input[name="text"]');
                        var inputEmail = $('input[name="email"]');

                        $(".addReviewBtn").click(function () {

                            if (isGmail == "nogmail") {
                                if (confirm("Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§ Î°úÍ∑∏Ïù∏ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) {
                                    location.href = "http://localhost:8181/houspace/mypage";
                                } else {
                                    return;
                                }
                            } else {

                                inputText.val("");
                                reviewModal.modal('show');
                            }
                        });

                        $(".reviewSaveBtn").click(function () {
                            var data = {
                                bnum: bnum,
                                grade: grade,
                                text: inputText.val(),
                                nickName: inputMid.val(),
                                email: inputEmail.val()
                            };

                            console.log(data);

                            $.ajax({

                                url: '/reviews/' + bnum,
                                type: 'POST',
                                data: JSON.stringify(data),
                                contentType: "application/json; charset=utf-8",
                                dataType: "data",
                                success: function (result) {

                                    console.log("Í∞í : " + result);
                                }
                            })

                            reviewModal.modal('hide');
                            getBoardReviews();

                        });


                        <!-- Î¶¨Î∑∞Î™©Î°ù ----------------------------------------------------------------------------------->

                        //ÌéòÏù¥ÏßÄÍ∞Ä Ïó¥Î¶¨Î©¥ Î∞îÎ°ú Î¶¨Î∑∞ Îç∞Ïù¥ÌÑ∞Îì§ÏùÑ Í∞ÄÏ†∏ÏôÄÏÑú ÏÇ¨Ïö©ÌïúÎã§.
                        function getBoardReviews() {

                            function formatTime(str) {
                                var date = new Date(str);

                                return date.getFullYear() + '/' +
                                    (date.getMonth() + 1) + '/' +
                                    date.getDate() + ' ' +
                                    date.getHours() + ':' +
                                    date.getMinutes();
                            }

                            $.getJSON("/reviews/" + bnum + "/all", function (arr) {
                                var str = "";

                                $.each(arr, function (idx, review) {

                                    console.log(review);

                                    switch (review.grade) {
                                        case 1:
                                            review.grade = "‚òÖ";
                                            break;
                                        case 2:
                                            review.grade = "‚òÖ‚òÖ";
                                            break;
                                        case 3:
                                            review.grade = "‚òÖ‚òÖ‚òÖ";
                                            break;
                                        case 4:
                                            review.grade = "‚òÖ‚òÖ‚òÖ‚òÖ";
                                            break;
                                        case 5:
                                            review.grade = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ";
                                            break;
                                        default:
                                            review.grade = "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ";
                                            break;
                                    }


                                    str += '    <div class="card-body" data-reviewnum=' + review.reviewnum + ' data-mid=' + review.mid + '>';
                                    str += '    <h5 class="card-title">' + review.text + ' <span>' + review.grade + '</span></h5>';
                                    str += '    <h6 class="card-subtitle mb-2 text-muted">' + review.nickName + '</h6>';
                                    str += '    <p class="card-text">' + formatTime(review.regDate) + '</p>';
                                    str += '    </div>';
                                });


                                // grade Ïà´ÏûêÎ•º Ï∞æÏïÑÏÑú Î≥ÑÎ°ú Î∞îÍæ∏Îäî ÏΩîÎìú

                                $(".reviewList").html(str);
                            });

                            $(".reviewgrade").each(function (idx, o) {

                                console.log(o);
                                $(this).starrr({rating: $(this).data("grade2"), readOnly: true});
                            });

                        }

                        getBoardReviews();


                        /* Î°úÍ∑∏Ïù∏ÏùÑ ÌïòÏßÄ ÏïäÏïòÍ±∞ÎÇò ÏòàÏïΩÌïòÏßÄ ÏïäÏùÄ Í≥≥Ïù¥ÎùºÎ©¥ Î¶¨Î∑∞Î≤ÑÌäº ÏïàÎ≥¥Ïù¥Í≤å */
                        let bookEmail = [[${bookEmail}]]

                        if (isGmail != "nogmail") {
                            if (isGmail != bookEmail) {
                                $(".addReviewBtn").hide();
                            }
                        } else if (isGmail == "nogmail") {
                            $(".addReviewBtn").hide();
                        }
                        /* Î°úÍ∑∏Ïù∏ÏùÑ ÌïòÏßÄ ÏïäÏïòÍ±∞ÎÇò ÏòàÏïΩÌïòÏßÄ ÏïäÏùÄ Í≥≥Ïù¥ÎùºÎ©¥ Î¶¨Î∑∞Î≤ÑÌäº ÏïàÎ≥¥Ïù¥Í≤å */

                        /* Í≥µÏú† Î≤ÑÌäº ÎàÑÎ•¥Î©¥ Ïö∞ÏÑ† url Î≥µÏÇ¨ÌïòÏó¨ alert Ï∞Ω ÎùÑÏõÄ *****************/
                        $("#share").click(function (e) {
                            e.preventDefault();
                            var url = '';
                            var textarea = document.createElement("textarea");
                            document.body.appendChild(textarea);
                            url = window.document.location.href;
                            textarea.value = url;
                            textarea.select();
                            document.execCommand("copy");
                            document.body.removeChild(textarea);
                            alert("URLÏù¥ Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§.")
                        });
                        /* Í≥µÏú† Î≤ÑÌäº ÎàÑÎ•¥Î©¥ Ïö∞ÏÑ† url Î≥µÏÇ¨ÌïòÏó¨ alert Ï∞Ω ÎùÑÏõÄ *****************/


                    });

                </script>


                <em class="link">
                    <a href="javascript:void(0);"
                       onclick="window.open('http://fiy.daum.net/fiy/map/CsGeneral.daum', '_blank', 'width=981, height=650')">
                        <p style="font-size: 12px; color: #5b5b5b !important; text-decoration: none;">ÌòπÏãú Ï£ºÏÜå Í≤∞Í≥ºÍ∞Ä ÏûòÎ™ª ÎÇòÏò§Îäî
                            Í≤ΩÏö∞ÏóêÎäî Ïó¨Í∏∞Ïóê Ï†úÎ≥¥Ìï¥Ï£ºÏÑ∏Ïöî.</p>
                    </a>
                </em>


            </div>
        </section>

        </div>

    </th:block>

</th:block>